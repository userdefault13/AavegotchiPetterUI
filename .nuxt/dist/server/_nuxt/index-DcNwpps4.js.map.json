{"file":"index-DcNwpps4.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderClass","_ssrInterpolate","_unref","_ssrIncludeBooleanAttr","_ssrRenderList","_ssrRenderAttr"],"sources":["../../../../lib/wagmi.ts","../../../../components/WalletConnect.vue","../../../../components/BotControl.vue","../../../../composables/useDelegationStatus.ts","../../../../components/DelegationCard.vue","../../../../components/DelegationList.vue","../../../../components/HomeDashboard.vue"],"sourcesContent":["import { createConfig, http, injected } from '@wagmi/core'\nimport { base } from '@wagmi/core/chains'\nimport { ensureRawAddress as ensureRawAddressFromAddress } from './address'\n\n/** Re-export for convenience. Ensures address is a raw 0x address. Rejects ENS names (Base ENS resolution fails). */\nexport const ensureRawAddress = ensureRawAddressFromAddress\n\n/** Shortens address for display. */\nexport function shortenAddress(addr: string): string {\n  if (!addr || addr.length < 10) return addr\n  return `${addr.slice(0, 6)}...${addr.slice(-4)}`\n}\n\nexport const metaMaskConnector = injected({ target: 'metaMask' })\nexport const coinbaseConnector = injected({ target: 'coinbaseWallet' })\n\nexport const wagmiConfig = createConfig({\n  chains: [base],\n  connectors: [metaMaskConnector, coinbaseConnector],\n  transports: {\n    [base.id]: http(),\n  },\n  ssr: true,\n})\n\nexport const AAVEGOTCHI_DIAMOND_ADDRESS = '0xA99c4B08201F2913Db8D28e71d020c4298F29dBF' as const\n\nexport const AAVEGOTCHI_FACET_ABI = [\n  {\n    type: 'function',\n    name: 'isPetOperatorForAll',\n    stateMutability: 'view',\n    inputs: [\n      { name: '_owner', type: 'address' },\n      { name: '_operator', type: 'address' },\n    ],\n    outputs: [{ type: 'bool' }],\n  },\n  {\n    type: 'function',\n    name: 'tokenIdsOfOwner',\n    stateMutability: 'view',\n    inputs: [{ name: '_owner', type: 'address' }],\n    outputs: [{ type: 'uint32[]' }],\n  },\n  {\n    type: 'function',\n    name: 'setPetOperatorForAll',\n    stateMutability: 'nonpayable',\n    inputs: [\n      { name: '_operator', type: 'address' },\n      { name: '_approved', type: 'bool' },\n    ],\n    outputs: [],\n  },\n] as const\n\nexport const AAVEGOTCHI_GAME_FACET_ABI = [\n  {\n    inputs: [{ internalType: 'uint256[]', name: '_tokenIds', type: 'uint256[]' }],\n    name: 'interact',\n    outputs: [],\n    stateMutability: 'nonpayable',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'uint256', name: '_tokenId', type: 'uint256' }],\n    name: 'kinship',\n    outputs: [{ internalType: 'uint256', name: '', type: 'uint256' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n  {\n    inputs: [{ internalType: 'address', name: '_owner', type: 'address' }],\n    name: 'tokenIdsOfOwner',\n    outputs: [{ internalType: 'uint32[]', name: '', type: 'uint32[]' }],\n    stateMutability: 'view',\n    type: 'function',\n  },\n] as const\n","<template>\n  <div class=\"wallet-connect\">\n    <div v-if=\"!isConnected\" class=\"space-y-4\">\n      <p class=\"text-slate-400\">Connect with MetaMask or Coinbase Wallet only</p>\n      <div class=\"flex flex-col sm:flex-row gap-3\">\n        <button\n          @click=\"connectWallet('metaMask')\"\n          :disabled=\"connecting\"\n          class=\"px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n        >\n          {{ connecting ? 'Connecting...' : 'MetaMask' }}\n        </button>\n        <button\n          @click=\"connectWallet('coinbaseWallet')\"\n          :disabled=\"connecting\"\n          class=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n        >\n          {{ connecting ? 'Connecting...' : 'Coinbase Wallet' }}\n        </button>\n      </div>\n      <p v-if=\"error\" class=\"text-red-400 text-sm\">{{ error }}</p>\n      <p v-if=\"error\" class=\"text-slate-400 text-xs mt-1\">\n        Have Uniswap or other wallets? Disable them or use a private window with only MetaMask or Coinbase Wallet.\n      </p>\n    </div>\n    <div v-else class=\"space-y-4\">\n      <div class=\"bg-emerald-500/20 border border-emerald-500/50 rounded-lg p-4\">\n        <p class=\"text-emerald-400 font-medium\">Connected</p>\n        <p class=\"text-slate-300 text-sm mt-1 break-all\">{{ address }}</p>\n      </div>\n      <p v-if=\"!isAuthenticated\" class=\"text-amber-400/90 text-sm\">\n        Sign in below to access Bot Control, Delegation List, and full dashboard.\n      </p>\n      <button\n        v-if=\"!isAuthenticated\"\n        @click=\"signMessage\"\n        :disabled=\"signing\"\n        class=\"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {{ signing ? 'Signing...' : 'Sign Message to Login' }}\n      </button>\n      <button\n        v-else\n        @click=\"disconnectWallet\"\n        class=\"px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700\"\n      >\n        Disconnect\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { getAccount, connect, disconnect, signMessage as wagmiSignMessage } from '@wagmi/core'\nimport { wagmiConfig, metaMaskConnector, coinbaseConnector } from '~/lib/wagmi'\n\nconst config = useRuntimeConfig()\nconst allowedAddress = (config.public?.allowedAddress || '0x2127aa7265d573aa467f1d73554d17890b872e76').toLowerCase()\nconst allowedAddressesRaw = config.public?.allowedAddresses as string | undefined\nconst allowedList = allowedAddressesRaw\n  ? allowedAddressesRaw.split(',').map((a) => a.trim().toLowerCase()).filter(Boolean)\n  : [allowedAddress]\n\nconst address = ref<string>('')\nconst isConnected = ref(false)\nconst isAuthenticated = ref(false)\nconst connecting = ref(false)\nconst signing = ref(false)\nconst error = ref<string>('')\n\nconst checkAuth = async () => {\n  try {\n    const response = await $fetch<{ authenticated: boolean }>('/api/auth/check')\n    isAuthenticated.value = response.authenticated\n  } catch (err) {\n    isAuthenticated.value = false\n  }\n}\n\nconst connectWallet = async (target: 'metaMask' | 'coinbaseWallet') => {\n  connecting.value = true\n  error.value = ''\n\n  try {\n    const connector = target === 'metaMask' ? metaMaskConnector : coinbaseConnector\n    const result = await connect(wagmiConfig, { connector })\n\n    if (result?.accounts?.[0]) {\n      address.value = result.accounts[0]\n      isConnected.value = true\n\n      const addr = result.accounts[0].toLowerCase()\n      if (!allowedList.includes(addr)) {\n        error.value = allowedList.length === 1\n          ? `Your address is not whitelisted. Only ${allowedAddress} is allowed.`\n          : 'Your address is not whitelisted.'\n        isConnected.value = false\n      } else {\n        await checkAuth()\n      }\n    }\n  } catch (err: any) {\n    const msg = err?.message || 'Failed to connect wallet'\n    if (msg.includes('Provider not found')) {\n      error.value =\n        'MetaMask/Coinbase not found. Disable Uniswap Wallet and other extensions, or use a private window with only MetaMask or Coinbase.'\n    } else if (msg.includes('ethereum') && msg.includes('getter')) {\n      error.value =\n        'Wallet conflict detected. Try disabling other wallet extensions or use a private window with only MetaMask or Coinbase Wallet.'\n    } else {\n      error.value = msg\n    }\n    isConnected.value = false\n  } finally {\n    connecting.value = false\n  }\n}\n\nconst signMessage = async () => {\n  signing.value = true\n  error.value = ''\n\n  try {\n    const message = `Sign in to Aavegotchi Petter Bot\\n\\nAddress: ${address.value}\\n\\nThis request will not trigger a blockchain transaction or cost any gas fees.`\n\n    const signature = await wagmiSignMessage(wagmiConfig, {\n      message,\n      account: address.value as `0x${string}`,\n    })\n\n    const response = await $fetch<{ success: boolean }>('/api/auth/verify', {\n      method: 'POST',\n      body: {\n        address: address.value,\n        message,\n        signature,\n      },\n    })\n\n    if (response.success) {\n      isAuthenticated.value = true\n      // Full reload so parent HomeDashboard re-checks auth and shows all sections\n      window.location.href = '/'\n    }\n  } catch (err: any) {\n    error.value = err?.message || err?.data?.message || 'Failed to sign message'\n  } finally {\n    signing.value = false\n  }\n}\n\nconst disconnectWallet = async () => {\n  try {\n    await $fetch('/api/auth/logout', { method: 'POST' })\n    await disconnect(wagmiConfig)\n    isConnected.value = false\n    isAuthenticated.value = false\n    address.value = ''\n    await navigateTo('/')\n  } catch (err) {\n    console.error('Failed to disconnect:', err)\n  }\n}\n\nonMounted(async () => {\n  if (typeof window === 'undefined') return\n  const account = getAccount(wagmiConfig)\n  if (account.isConnected && account.address) {\n    address.value = account.address\n    isConnected.value = true\n    await checkAuth()\n  }\n})\n</script>\n","<template>\n  <div class=\"bot-control\">\n    <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n      <h2 class=\"text-lg font-semibold mb-4\">Bot Control</h2>\n\n      <div v-if=\"loading\" class=\"text-center py-4\">\n        <p class=\"text-slate-400\">Loading...</p>\n      </div>\n\n      <div v-else class=\"space-y-4\">\n        <div class=\"flex items-center justify-between\">\n          <div>\n            <p class=\"text-sm text-slate-400\">Status</p>\n            <p class=\"text-lg font-semibold\" :class=\"status.running ? 'text-emerald-400' : 'text-red-400'\">\n              {{ status.running ? 'Running' : 'Stopped' }}\n            </p>\n          </div>\n          <div v-if=\"status.lastRun\">\n            <p class=\"text-sm text-slate-400\">Last Run</p>\n            <p class=\"text-lg font-semibold\">{{ formatDate(status.lastRun) }}</p>\n          </div>\n        </div>\n\n        <div v-if=\"status.lastRunMessage && !status.lastError\" class=\"bg-white/5 border border-white/10 rounded-lg p-4\">\n          <p class=\"text-slate-400 text-sm font-medium\">Last Outcome</p>\n          <p class=\"text-slate-300 text-sm mt-1\">{{ status.lastRunMessage }}</p>\n        </div>\n        <div v-if=\"status.lastError\" class=\"bg-red-500/20 border border-red-500/50 rounded-lg p-4\">\n          <p class=\"text-red-400 font-medium\">Last Error</p>\n          <p class=\"text-red-300 text-sm mt-1\">{{ status.lastError }}</p>\n        </div>\n\n        <div class=\"flex gap-4\">\n          <button\n            @click=\"toggleBot\"\n            :disabled=\"toggling\"\n            :class=\"[\n              'px-6 py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed',\n              status.running\n                ? 'bg-red-600 text-white hover:bg-red-700'\n                : 'bg-emerald-600 text-white hover:bg-emerald-700',\n            ]\"\n          >\n            {{ toggling ? 'Processing...' : status.running ? 'Stop Bot' : 'Start Bot' }}\n          </button>\n\n          <button\n            @click=\"triggerBot\"\n            :disabled=\"triggering\"\n            class=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {{ triggering ? 'Running...' : 'Trigger Now' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\n\nconst emit = defineEmits<{ triggered: [] }>()\n\ninterface BotState {\n  running: boolean\n  lastRun?: number\n  lastError?: string\n  lastRunMessage?: string\n}\n\nconst status = ref<BotState>({ running: false })\nconst loading = ref(true)\nconst toggling = ref(false)\nconst triggering = ref(false)\n\nconst fetchStatus = async () => {\n  try {\n    const data = await $fetch<BotState>('/api/bot/status')\n    status.value = data\n  } catch (err) {\n    console.error('Failed to fetch bot status:', err)\n  } finally {\n    loading.value = false\n  }\n}\n\nconst toggleBot = async () => {\n  toggling.value = true\n  try {\n    const endpoint = status.value.running ? '/api/bot/stop' : '/api/bot/start'\n    await $fetch(endpoint, { method: 'POST' })\n    await fetchStatus()\n  } catch (err) {\n    console.error('Failed to toggle bot:', err)\n    alert('Failed to toggle bot status')\n  } finally {\n    toggling.value = false\n  }\n}\n\nconst triggerBot = async () => {\n  triggering.value = true\n  try {\n    const res = await $fetch<{ success: boolean; result?: { message?: string; petted?: number } }>('/api/bot/trigger', {\n      method: 'POST',\n      body: { force: true },\n    })\n    const msg = res?.result?.message\n    alert(msg || 'Bot triggered successfully!')\n    emit('triggered')\n    await fetchStatus()\n  } catch (err: any) {\n    console.error('Failed to trigger bot:', err)\n    const msg =\n      err?.data?.message ||\n      err?.data?.error ||\n      err?.message ||\n      (typeof err?.data === 'string' ? err.data : null) ||\n      'Failed to trigger bot'\n    alert(msg)\n  } finally {\n    triggering.value = false\n  }\n}\n\nconst formatDate = (timestamp: number) => {\n  return new Date(timestamp).toLocaleString()\n}\n\nonMounted(() => {\n  fetchStatus()\n  setInterval(fetchStatus, 10000)\n})\n</script>\n","import { ref, type Ref } from 'vue'\nimport { getAccount, readContract } from '@wagmi/core'\nimport {\n  wagmiConfig,\n  AAVEGOTCHI_DIAMOND_ADDRESS,\n  AAVEGOTCHI_FACET_ABI,\n  ensureRawAddress,\n} from '~/lib/wagmi'\n\nexport interface DelegationStatus {\n  approved: boolean\n  registered: boolean\n  gotchiCount: number\n  petterAddress: string\n  canRegister: boolean\n}\n\nconst CORRECT_PETTER_ADDRESS = '0x9a3E95f448f3daB367dd9213D4554444faa272F1' as const\nconst DEPRECATED_PETTER_ADDRESSES = ['0xb4c123857ea7d2f1343d749818c19af439c65e15', '0x6c5fc27f465ac73466d3a10508d2ed8a68364bbf']\n\nexport function useDelegationStatus() {\n  const config = useRuntimeConfig()\n  let petterAddress = (config.public?.petterAddress as string) || CORRECT_PETTER_ADDRESS\n  if (DEPRECATED_PETTER_ADDRESSES.includes(petterAddress.toLowerCase())) {\n    petterAddress = CORRECT_PETTER_ADDRESS\n  }\n\n  const status: Ref<DelegationStatus | null> = ref(null)\n  const loading = ref(true)\n\n  const fetchStatus = async () => {\n    if (typeof window === 'undefined') return\n    const ownerAddress = getAccount(wagmiConfig).address\n    if (!ownerAddress || !petterAddress) {\n      status.value = null\n      loading.value = false\n      return\n    }\n    try {\n      const rawPetter = ensureRawAddress(petterAddress)\n      const [approved, registeredRes] = await Promise.all([\n        readContract(wagmiConfig, {\n          address: AAVEGOTCHI_DIAMOND_ADDRESS,\n          abi: AAVEGOTCHI_FACET_ABI,\n          functionName: 'isPetOperatorForAll',\n          args: [ownerAddress, rawPetter],\n        }),\n        $fetch<{ registered: boolean }>('/api/delegation/registered').catch(() => ({ registered: false })),\n      ])\n      let gotchiCount = 0\n      if (approved) {\n        const tokenIds = await readContract(wagmiConfig, {\n          address: AAVEGOTCHI_DIAMOND_ADDRESS,\n          abi: AAVEGOTCHI_FACET_ABI,\n          functionName: 'tokenIdsOfOwner',\n          args: [ownerAddress],\n        })\n        gotchiCount = Array.isArray(tokenIds) ? tokenIds.length : 0\n      }\n      status.value = {\n        approved,\n        registered: registeredRes.registered,\n        gotchiCount,\n        petterAddress,\n        canRegister: approved && !registeredRes.registered,\n      }\n    } catch (err) {\n      console.error('Failed to fetch delegation status:', err)\n      status.value = null\n    } finally {\n      loading.value = false\n    }\n  }\n\n  return { status, loading, petterAddress, fetchStatus }\n}\n","<template>\n  <div class=\"delegation-card\">\n    <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n      <h2 class=\"text-lg font-semibold mb-2\">EIP PetOperator Delegation</h2>\n      <p class=\"text-slate-400 text-sm mb-4\">\n        Keep your Aavegotchis in your wallet. Approve our petter to pet on your behalf—no transfer needed.\n      </p>\n\n      <div v-if=\"loading\" class=\"text-center py-4\">\n        <p class=\"text-slate-400\">Loading...</p>\n      </div>\n\n      <div v-else-if=\"!status\" class=\"text-center py-4\">\n        <p class=\"text-slate-400\">Connect your wallet to view delegation status. If already connected, refresh the page.</p>\n      </div>\n\n      <div v-else class=\"space-y-4\">\n        <div class=\"bg-white/5 rounded-lg p-4 font-mono text-sm break-all\">\n          <span class=\"text-slate-400\">Petter address: </span>\n          {{ petterAddress || '—' }}\n        </div>\n\n        <div class=\"space-y-2\">\n          <div class=\"flex items-center gap-2\">\n            <span\n              class=\"w-3 h-3 rounded-full\"\n              :class=\"status?.approved ? 'bg-emerald-500' : 'bg-amber-500'\"\n            />\n            <span>{{ status?.approved ? 'Approved' : 'Not approved' }}</span>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <span\n              class=\"w-3 h-3 rounded-full\"\n              :class=\"status?.registered ? 'bg-emerald-500' : 'bg-slate-500'\"\n            />\n            <span>{{ status?.registered ? 'Registered' : 'Not registered' }}</span>\n          </div>\n          <div v-if=\"status?.gotchiCount !== undefined\" class=\"text-sm text-slate-400\">\n            {{ status.gotchiCount }} Aavegotchi(es) in your wallet\n          </div>\n        </div>\n\n        <div class=\"flex flex-col gap-2\">\n          <button\n            v-if=\"!status?.approved\"\n            @click=\"approveDelegation\"\n            :disabled=\"approving\"\n            class=\"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 font-medium\"\n          >\n            {{ approving ? 'Confirm in wallet...' : '1. Approve Petter (sign tx)' }}\n          </button>\n          <template v-else-if=\"status?.canRegister\">\n            <button\n              @click=\"register\"\n              :disabled=\"registering\"\n              class=\"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 font-medium\"\n            >\n              {{ registering ? 'Registering...' : '2. Register for Auto-Petting' }}\n            </button>\n            <button\n              @click=\"revokeDelegation\"\n              :disabled=\"revoking\"\n              class=\"px-4 py-2 text-slate-400 hover:text-white text-sm\"\n            >\n              {{ revoking ? 'Revoking...' : 'Revoke approval' }}\n            </button>\n          </template>\n          <template v-else-if=\"status?.registered\">\n            <div class=\"px-4 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg text-sm border border-emerald-500/50\">\n              ✓ You're all set! Your Aavegotchis will be petted every 12 hours.\n            </div>\n            <button\n              @click=\"revokeDelegation\"\n              :disabled=\"revoking\"\n              class=\"px-4 py-2 bg-red-600/80 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 text-sm font-medium\"\n            >\n              {{ revoking ? 'Revoking...' : 'Revoke & Change Petter' }}\n            </button>\n            <div class=\"mt-2 pt-2 border-t border-white/10\">\n              <p class=\"text-slate-400 text-xs mb-1\">Revoke a different petter address:</p>\n              <div class=\"flex flex-wrap gap-2 items-center\">\n                <button\n                  v-if=\"petterAddress\"\n                  type=\"button\"\n                  @click=\"confirmRevoke(petterAddress)\"\n                  :disabled=\"revoking\"\n                  class=\"px-3 py-1.5 bg-red-600/60 text-white rounded text-sm hover:bg-red-600 disabled:opacity-50\"\n                >\n                  Revoke {{ shortenAddress(petterAddress) }}\n                </button>\n                <input\n                  v-model=\"revokeAddress\"\n                  type=\"text\"\n                  placeholder=\"0x...\"\n                  class=\"flex-1 min-w-[140px] bg-white/10 border border-white/20 rounded px-3 py-1.5 text-sm font-mono placeholder-slate-500\"\n                />\n                <button\n                  type=\"button\"\n                  @click=\"revokeSpecificAddress\"\n                  :disabled=\"revoking || !revokeAddress\"\n                  class=\"px-3 py-1.5 bg-red-600/60 text-white rounded text-sm hover:bg-red-600 disabled:opacity-50\"\n                >\n                  Revoke\n                </button>\n              </div>\n            </div>\n          </template>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\nimport { getWalletClient, writeContract } from '@wagmi/core'\nimport { wagmiConfig, AAVEGOTCHI_DIAMOND_ADDRESS, AAVEGOTCHI_FACET_ABI, shortenAddress, ensureRawAddress } from '~/lib/wagmi'\nimport { useDelegationStatus } from '~/composables/useDelegationStatus'\n\nconst { status, loading, petterAddress, fetchStatus } = useDelegationStatus()\nconst revokeAddress = ref('')\nconst approving = ref(false)\nconst registering = ref(false)\nconst revoking = ref(false)\n\nconst approveDelegation = async () => {\n  if (!petterAddress) {\n    alert('Petter address not configured')\n    return\n  }\n  approving.value = true\n  try {\n    const rawAddr = ensureRawAddress(petterAddress)\n    const walletClient = await getWalletClient(wagmiConfig)\n    if (!walletClient) {\n      alert('Please connect your wallet first')\n      return\n    }\n    await writeContract(wagmiConfig, {\n      address: AAVEGOTCHI_DIAMOND_ADDRESS,\n      abi: AAVEGOTCHI_FACET_ABI,\n      functionName: 'setPetOperatorForAll',\n      args: [rawAddr, true],\n    })\n    await fetchStatus()\n  } catch (err: any) {\n    console.error('Approve failed:', err)\n    alert(err?.message || 'Approval failed')\n  } finally {\n    approving.value = false\n  }\n}\n\nconst register = async () => {\n  registering.value = true\n  try {\n    await $fetch('/api/delegation/register', { method: 'POST' })\n    await fetchStatus()\n  } catch (err: any) {\n    alert(err?.data?.message || err?.message || 'Registration failed')\n  } finally {\n    registering.value = false\n  }\n}\n\nconst revokeDelegation = async () => {\n  if (!petterAddress) return\n  if (!confirm('Revoke the current petter? You will need to approve again after updating the petter address.')) return\n  await doRevoke(petterAddress.value)\n}\n\nconst confirmRevoke = (addr: string) => {\n  if (!confirm(`Revoke ${addr} as petter for your gotchis?`)) return\n  doRevoke(addr)\n}\n\nconst revokeSpecificAddress = async () => {\n  const addr = revokeAddress.value?.trim()\n  if (!addr || !addr.startsWith('0x')) {\n    alert('Enter a valid address (0x...)')\n    return\n  }\n  confirmRevoke(addr)\n  revokeAddress.value = ''\n}\n\nconst doRevoke = async (addr: string) => {\n  revoking.value = true\n  try {\n    const rawAddr = ensureRawAddress(addr)\n    const walletClient = await getWalletClient(wagmiConfig)\n    if (!walletClient) {\n      alert('Please connect your wallet first')\n      return\n    }\n    await writeContract(wagmiConfig, {\n      address: AAVEGOTCHI_DIAMOND_ADDRESS,\n      abi: AAVEGOTCHI_FACET_ABI,\n      functionName: 'setPetOperatorForAll',\n      args: [rawAddr, false],\n    })\n    if (addr.toLowerCase() === petterAddress?.toLowerCase()) {\n      await $fetch('/api/delegation/unregister', { method: 'POST' })\n    }\n    await fetchStatus()\n    alert('Revoked successfully.')\n  } catch (err: any) {\n    console.error('Revoke failed:', err)\n    alert(err?.message || 'Revoke failed')\n  } finally {\n    revoking.value = false\n  }\n}\n\nonMounted(() => {\n  fetchStatus()\n})\n</script>\n","<template>\n  <div class=\"delegation-list\">\n    <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <h2 class=\"text-lg font-semibold\">Delegating Owners</h2>\n        <button\n          @click=\"fetchOwners\"\n          :disabled=\"loading\"\n          class=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition disabled:opacity-50\"\n        >\n          {{ loading ? 'Loading...' : 'Refresh' }}\n        </button>\n      </div>\n\n      <div v-if=\"loading && owners.length === 0\" class=\"text-center py-8 text-slate-400\">\n        <p>Loading delegation list...</p>\n      </div>\n\n      <div v-else-if=\"owners.length === 0\" class=\"text-center py-8 text-slate-400\">\n        <p>No users have delegated petting yet</p>\n      </div>\n\n      <div v-else class=\"space-y-4\">\n        <div class=\"flex flex-wrap items-center justify-between gap-2 text-sm text-slate-400 mb-2\">\n          <span>Total: {{ owners.length }} owner(s)</span>\n          <span class=\"font-semibold text-white\">{{ totalGotchis }} Aavegotchis to pet</span>\n          <button\n            v-if=\"owners.length > 0\"\n            type=\"button\"\n            @click=\"unregisterAll\"\n            :disabled=\"clearing\"\n            class=\"px-3 py-1.5 text-sm bg-red-600/80 hover:bg-red-600 text-white rounded-lg transition disabled:opacity-50\"\n          >\n            {{ clearing ? 'Clearing...' : 'Unregister all' }}\n          </button>\n        </div>\n        <div class=\"space-y-2 max-h-64 overflow-y-auto\">\n          <div\n            v-for=\"item in owners\"\n            :key=\"item.address\"\n            class=\"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition\"\n          >\n            <a\n              :href=\"`https://basescan.org/address/${item.address}`\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              class=\"font-mono text-sm text-blue-400 hover:text-blue-300 truncate flex-1 min-w-0\"\n            >\n              {{ item.address.slice(0, 6) }}...{{ item.address.slice(-4) }}\n            </a>\n            <span class=\"text-emerald-400 font-medium ml-3 shrink-0\">\n              {{ item.gotchiCount }} gotchi{{ item.gotchiCount !== 1 ? 's' : '' }}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue'\n\ninterface DelegationOwner {\n  address: string\n  gotchiCount: number\n}\n\nconst owners = ref<DelegationOwner[]>([])\nconst totalGotchis = ref(0)\nconst loading = ref(false)\nconst clearing = ref(false)\n\nconst unregisterAll = async () => {\n  if (!confirm('Unregister all delegates? The worker will stop petting for them. Each owner should revoke on-chain.')) return\n  clearing.value = true\n  try {\n    const res = await $fetch<{ success: boolean; message: string; count: number }>('/api/delegation/clear-all', {\n      method: 'POST',\n    })\n    alert(res.message)\n    await fetchOwners()\n  } catch (err: any) {\n    alert(err?.data?.message || err?.message || 'Failed to unregister all')\n  } finally {\n    clearing.value = false\n  }\n}\n\nconst fetchOwners = async () => {\n  loading.value = true\n  try {\n    const data = await $fetch<{ owners: DelegationOwner[]; totalGotchis: number }>(\n      '/api/delegation/owners'\n    )\n    owners.value = data.owners || []\n    totalGotchis.value = data.totalGotchis || 0\n  } catch (err) {\n    console.error('Failed to fetch delegation owners:', err)\n    owners.value = []\n    totalGotchis.value = 0\n  } finally {\n    loading.value = false\n  }\n}\n\nonMounted(() => {\n  fetchOwners()\n  setInterval(fetchOwners, 60000)\n})\n</script>\n","<template>\n  <div class=\"home-dashboard min-h-screen bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 text-white p-4 md:p-8\">\n    <div class=\"max-w-6xl mx-auto space-y-6\">\n      <!-- Header -->\n      <div class=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n        <div>\n          <h1 class=\"text-3xl md:text-4xl font-bold tracking-tight\">Aavegotchi Petter</h1>\n          <p class=\"text-slate-400 mt-1\">Automated petting on Base • {{ pettingIntervalLabel }}</p>\n        </div>\n        <div class=\"flex items-center gap-3\">\n          <div\n            class=\"flex items-center gap-2 px-4 py-2 rounded-lg\"\n            :class=\"status.running ? 'bg-emerald-500/20 border border-emerald-500/50' : 'bg-amber-500/20 border border-amber-500/50'\"\n          >\n            <div class=\"w-2 h-2 rounded-full animate-pulse\" :class=\"status.running ? 'bg-emerald-400' : 'bg-amber-400'\" />\n            <span class=\"text-sm font-medium\">{{ status.running ? 'Running' : 'Stopped' }}</span>\n          </div>\n          <button\n            v-if=\"isAuthenticated\"\n            @click=\"logout\"\n            class=\"px-4 py-2 bg-red-600/80 hover:bg-red-600 rounded-lg text-sm font-medium transition\"\n          >\n            Logout\n          </button>\n          <WalletConnect v-else />\n        </div>\n      </div>\n\n      <!-- Stats Grid -->\n      <div class=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-4\">\n          <p class=\"text-slate-400 text-sm\">Next Pet</p>\n          <p class=\"text-xl font-bold mt-1 font-mono\">{{ nextPetTimer }}</p>\n        </div>\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-4\">\n          <p class=\"text-slate-400 text-sm\">Total Petted</p>\n          <p class=\"text-xl font-bold mt-1\">{{ stats.totalAavegotchisPetted ?? 0 }}</p>\n        </div>\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-4\">\n          <p class=\"text-slate-400 text-sm\">Success Rate</p>\n          <p class=\"text-xl font-bold mt-1\" :class=\"successRateColor\">{{ stats.successRate ?? 100 }}%</p>\n        </div>\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-4\">\n          <p class=\"text-slate-400 text-sm\">Last 24h</p>\n          <p class=\"text-xl font-bold mt-1\">{{ stats.transactionsLast24h ?? 0 }}</p>\n        </div>\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-4\">\n          <div class=\"flex items-center justify-between gap-2\">\n            <div>\n              <p class=\"text-slate-400 text-sm\">Gas Cost</p>\n              <p class=\"text-xl font-bold mt-1 font-mono\">{{ formatGasCost(stats.totalGasCostEth) }}</p>\n            </div>\n            <button\n              v-if=\"isAuthenticated && formatGasCost(stats.totalGasCostEth) === '—'\"\n              @click=\"backfillGas\"\n              :disabled=\"backfillLoading\"\n              class=\"px-2 py-1 text-xs bg-white/10 hover:bg-white/20 rounded transition disabled:opacity-50 shrink-0\"\n            >\n              {{ backfillLoading ? '...' : 'Look up' }}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Wallet & Auth Section -->\n      <div v-if=\"isAuthenticated\" class=\"grid md:grid-cols-2 gap-6\">\n        <!-- Petter Wallet Info -->\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <h2 class=\"text-lg font-semibold\">Petter Wallet</h2>\n            <button\n              @click=\"fetchPetterBalance\"\n              :disabled=\"balanceRefreshing\"\n              class=\"px-2 py-1 text-xs bg-white/10 hover:bg-white/20 rounded transition disabled:opacity-50\"\n            >\n              {{ balanceRefreshing ? '...' : 'Refresh' }}\n            </button>\n          </div>\n          <div class=\"space-y-3\">\n            <div>\n              <p class=\"text-slate-400 text-sm\">Address</p>\n              <p class=\"font-mono text-sm break-all mt-1\">{{ petterAddress || '—' }}</p>\n            </div>\n            <div>\n              <p class=\"text-slate-400 text-sm\">Balance (ETH)</p>\n              <p class=\"font-mono text-lg font-bold mt-1\">{{ petterBalance ?? '—' }}</p>\n              <p v-if=\"petterBalanceAddress\" class=\"text-slate-500 text-xs mt-0.5\">\n                from {{ petterBalanceAddress.slice(0, 10) }}...{{ petterBalanceAddress.slice(-8) }}\n              </p>\n            </div>\n            <div>\n              <p class=\"text-slate-400 text-sm\">Gotchis Delegated</p>\n              <p class=\"font-mono text-lg font-bold mt-1\">{{ totalGotchisDelegated ?? '—' }}</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Last Run -->\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">Bot Status</h2>\n          <div class=\"space-y-3\">\n            <div>\n              <p class=\"text-slate-400 text-sm\">Last Run</p>\n              <p class=\"mt-1\">{{ formatDate(status.lastRun) }}</p>\n            </div>\n            <div v-if=\"status.lastRunMessage && !status.lastError\">\n              <p class=\"text-slate-400 text-sm\">Last Outcome</p>\n              <p class=\"text-slate-300 text-sm mt-1\">{{ status.lastRunMessage }}</p>\n            </div>\n            <div v-if=\"status.lastError\">\n              <p class=\"text-slate-400 text-sm\">Last Error</p>\n              <p class=\"text-red-400 text-sm mt-1 truncate\">{{ status.lastError }}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- History Log -->\n      <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n        <div class=\"flex items-center justify-between mb-4\">\n          <h2 class=\"text-lg font-semibold\">Execution History</h2>\n          <button\n            v-if=\"isAuthenticated\"\n            @click=\"fetchHistory\"\n            :disabled=\"historyLoading\"\n            class=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition disabled:opacity-50\"\n          >\n            Refresh\n          </button>\n        </div>\n        <div v-if=\"!isAuthenticated\" class=\"text-center py-12 text-slate-400\">\n          <p>Connect wallet to view execution history</p>\n        </div>\n        <div v-else-if=\"historyLoading\" class=\"text-center py-12 text-slate-400\">\n          <p>Loading...</p>\n        </div>\n        <div v-else-if=\"history.length === 0\" class=\"text-center py-12 text-slate-400\">\n          <p>No executions yet</p>\n        </div>\n        <div v-else class=\"space-y-3 max-h-64 overflow-y-auto\">\n          <div\n            v-for=\"entry in history\"\n            :key=\"entry.type === 'transaction' ? entry.hash : entry.id\"\n            class=\"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition\"\n          >\n            <div class=\"flex-1 min-w-0\">\n              <template v-if=\"entry.type === 'transaction'\">\n                <a\n                  :href=\"`https://basescan.org/tx/${entry.hash}`\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  class=\"font-mono text-sm text-blue-400 hover:text-blue-300 truncate block\"\n                >\n                  {{ entry.hash.slice(0, 10) }}...{{ entry.hash.slice(-8) }}\n                </a>\n                <p class=\"text-slate-400 text-xs mt-1\">\n                  {{ formatDate(entry.timestamp) }} • {{ entry.tokenIds.length }} petted\n                  <span v-if=\"entry.gasCostWei\" class=\"text-slate-500\"> • {{ formatGasCost(Number(BigInt(entry.gasCostWei)) / 1e18) }}</span>\n                </p>\n              </template>\n              <template v-else>\n                <p class=\"text-slate-200 text-sm font-medium truncate\">{{ entry.message }}</p>\n                <p class=\"text-slate-400 text-xs mt-1\">{{ formatDate(entry.timestamp) }}{{ entry.petted != null ? ` • ${entry.petted} petted` : '' }}</p>\n              </template>\n            </div>\n            <span\n              class=\"text-xs font-medium ml-2\"\n              :class=\"entry.type === 'manual' ? 'text-amber-400' : 'text-emerald-400'\"\n            >\n              {{ entry.type === 'manual' ? 'Manual' : 'Success' }}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Bot Control & Delegation -->\n      <div v-if=\"isAuthenticated\" class=\"grid md:grid-cols-2 gap-6 mt-6\">\n        <BotControl v-if=\"workerEnabled\" @triggered=\"() => { fetchHistory(); fetchWorkerLogs(); }\" />\n        <DelegationCard />\n      </div>\n\n      <!-- Petting Frequency -->\n      <div v-if=\"isAuthenticated && workerEnabled\" class=\"mt-6\">\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n          <h2 class=\"text-lg font-semibold mb-4\">Petting Frequency</h2>\n          <p class=\"text-slate-400 text-sm mb-4\">\n            How often the bot checks and pets your Aavegotchis. Gotchis need petting at least every 12 hours for kinship.\n          </p>\n          <div class=\"flex flex-wrap items-center gap-4\">\n            <label class=\"flex items-center gap-2\">\n              <span class=\"text-slate-300 text-sm\">Interval:</span>\n              <select\n                :value=\"pettingIntervalHours\"\n                :disabled=\"frequencySaving\"\n                @change=\"(e) => setFrequency(Number((e.target as HTMLSelectElement).value))\"\n                class=\"bg-white/10 border border-white/20 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent disabled:opacity-50\"\n              >\n                <option v-for=\"h in hourOptions\" :key=\"h\" :value=\"h\">\n                  Every {{ h }} {{ h === 1 ? 'hour' : 'hours' }}\n                </option>\n              </select>\n            </label>\n            <span v-if=\"frequencySaving\" class=\"text-slate-400 text-sm\">Saving...</span>\n            <button\n              v-if=\"!testModeCountdown\"\n              type=\"button\"\n              @click=\"runTestMode(60)\"\n              :disabled=\"frequencySaving\"\n              class=\"px-4 py-2 text-sm bg-amber-600/80 hover:bg-amber-600 text-white rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Test (1 min)\n            </button>\n            <span v-else class=\"text-amber-400 text-sm font-medium\">\n              Reverting in {{ testModeCountdown }}s...\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <!-- Delegating Owners -->\n      <div v-if=\"isAuthenticated\" class=\"mt-6\">\n        <DelegationList />\n      </div>\n\n      <!-- Worker Logs -->\n      <div v-if=\"isAuthenticated && workerEnabled\" class=\"mt-6\">\n        <div class=\"bg-white/5 backdrop-blur border border-white/10 rounded-xl p-6\">\n          <div class=\"flex items-center justify-between mb-4\">\n            <h2 class=\"text-lg font-semibold\">Worker Logs</h2>\n            <button\n              @click=\"fetchWorkerLogs\"\n              :disabled=\"workerLogsLoading\"\n              class=\"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition disabled:opacity-50\"\n            >\n              {{ workerLogsLoading ? 'Loading...' : 'Refresh' }}\n            </button>\n          </div>\n          <div v-if=\"workerLogsLoading && workerLogs.length === 0\" class=\"text-center py-8 text-slate-400\">\n            <p>Loading worker logs...</p>\n          </div>\n          <div v-else-if=\"workerLogs.length === 0\" class=\"text-center py-8 text-slate-400\">\n            <p>No worker logs yet. Trigger a run to see logs.</p>\n          </div>\n          <div v-else class=\"space-y-1.5 max-h-80 overflow-y-auto font-mono text-xs\">\n            <div\n              v-for=\"(log, i) in workerLogs\"\n              :key=\"`${log.timestamp}-${i}`\"\n              class=\"flex items-start gap-2 py-1.5 px-2 rounded hover:bg-white/5\"\n              :class=\"{\n                'text-slate-300': log.level === 'info',\n                'text-amber-400': log.level === 'warn',\n                'text-red-400': log.level === 'error',\n              }\"\n            >\n              <span class=\"text-slate-500 shrink-0\">{{ formatLogTime(log.timestamp) }}</span>\n              <span class=\"shrink-0 w-10\" :class=\"{ 'text-amber-400': log.level === 'warn', 'text-red-400': log.level === 'error' }\">\n                [{{ log.level.toUpperCase() }}]\n              </span>\n              <span class=\"break-all\">{{ log.message }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\nimport { disconnect } from '@wagmi/core'\nimport { wagmiConfig } from '~/lib/wagmi'\n\ninterface HealthData {\n  status: string\n  bot: { running: boolean; lastRun: string | null; lastError: string | null; lastRunMessage?: string | null }\n  stats: {\n    totalTransactions: number\n    totalAavegotchisPetted: number\n    transactionsLast24h: number\n    totalGasCostEth?: number\n    successRate: number\n  }\n}\n\ntype ExecutionEntry =\n  | { type: 'transaction'; hash: string; timestamp: number; blockNumber: number; gasUsed: string; gasCostWei?: string; tokenIds: string[] }\n  | { type: 'manual'; id: string; timestamp: number; message: string; petted?: number }\n\nconst config = useRuntimeConfig()\nconst workerEnabled = computed(() => config.public.workerEnabled === true)\nconst health = ref<HealthData | null>(null)\nconst history = ref<ExecutionEntry[]>([])\nconst { status: delegationStatus, fetchStatus: fetchDelegation, petterAddress } = useDelegationStatus()\nconst petterBalance = ref<string | null>(null)\nconst petterBalanceAddress = ref<string | null>(null)\nconst balanceRefreshing = ref(false)\nconst totalGotchisDelegated = ref<number | null>(null)\nconst workerLogs = ref<{ timestamp: number; level: string; message: string }[]>([])\nconst pettingIntervalHours = ref(12)\nconst frequencySaving = ref(false)\nconst testModeCountdown = ref<number | null>(null)\nlet testModeIntervalId: ReturnType<typeof setInterval> | null = null\nconst loading = ref(true)\nconst historyLoading = ref(false)\nconst workerLogsLoading = ref(false)\nconst backfillLoading = ref(false)\nconst isAuthenticated = ref(false)\n\nconst status = computed(() => ({\n  running: health.value?.bot?.running ?? false,\n  lastRun: health.value?.bot?.lastRun ?? null,\n  lastError: health.value?.bot?.lastError ?? null,\n  lastRunMessage: health.value?.bot?.lastRunMessage ?? null,\n}))\n\nconst stats = computed(() => health.value?.stats ?? { successRate: 100 })\n\nconst nextPetTimer = computed(() => {\n  const lastRun = health.value?.bot?.lastRun\n  if (!lastRun) return '—'\n  const lastRunMs = new Date(lastRun).getTime()\n  const intervalMs = pettingIntervalHours.value * 60 * 60 * 1000\n  const nextRunMs = lastRunMs + intervalMs\n  const now = Date.now()\n  if (now >= nextRunMs) return 'Ready'\n  const diff = nextRunMs - now\n  const h = Math.floor(diff / 3600000)\n  const m = Math.floor((diff % 3600000) / 60000)\n  return `${h}h ${m}m`\n})\n\nconst hourOptions = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24]\n\nconst pettingIntervalLabel = computed(() => {\n  const h = pettingIntervalHours.value\n  if (h < 1 / 60) return `Every ${Math.round(h * 3600)} sec (test)`\n  if (h < 1) return `Every ${Math.round(h * 60)} min`\n  return `Every ${h} ${h === 1 ? 'hour' : 'hours'}`\n})\n\nconst successRateColor = computed(() => {\n  const rate = stats.value?.successRate ?? 100\n  if (rate >= 95) return 'text-emerald-400'\n  if (rate >= 80) return 'text-amber-400'\n  return 'text-red-400'\n})\n\nconst fetchHealth = async () => {\n  try {\n    const data = await $fetch<HealthData>('/api/health')\n    health.value = data\n  } catch (err) {\n    console.error('Failed to fetch health:', err)\n  }\n}\n\nconst fetchHistory = async () => {\n  if (!isAuthenticated.value) return\n  historyLoading.value = true\n  try {\n    const data = await $fetch<ExecutionEntry[]>('/api/transactions', { query: { limit: 20 } })\n    history.value = data\n  } catch (err) {\n    console.error('Failed to fetch history:', err)\n  } finally {\n    historyLoading.value = false\n  }\n}\n\nconst backfillGas = async () => {\n  if (!isAuthenticated.value) return\n  backfillLoading.value = true\n  try {\n    const res = await $fetch<{ ok: boolean; updated: number }>('/api/transactions/backfill-gas', {\n      method: 'POST',\n    })\n    if (res.ok && res.updated > 0) {\n      await fetchHealth()\n      await fetchHistory()\n    }\n  } catch (err) {\n    console.error('Backfill gas failed:', err)\n  } finally {\n    backfillLoading.value = false\n  }\n}\n\nconst fetchWorkerLogs = async () => {\n  if (!isAuthenticated.value) return\n  workerLogsLoading.value = true\n  try {\n    const data = await $fetch<{ timestamp: number; level: string; message: string }[]>('/api/bot/logs', {\n      query: { limit: 100 },\n    })\n    workerLogs.value = data\n  } catch (err) {\n    console.error('Failed to fetch worker logs:', err)\n    workerLogs.value = []\n  } finally {\n    workerLogsLoading.value = false\n  }\n}\n\nconst fetchFrequency = async () => {\n  if (!isAuthenticated.value) return\n  try {\n    const data = await $fetch<{ pettingIntervalHours: number }>('/api/bot/frequency')\n    pettingIntervalHours.value = data.pettingIntervalHours\n  } catch {\n    pettingIntervalHours.value = 12\n  }\n}\n\nconst setFrequency = async (hours: number) => {\n  if (!isAuthenticated.value) return\n  if (hours < 30 / 3600 || hours > 24) return\n  frequencySaving.value = true\n  try {\n    await $fetch('/api/bot/frequency', {\n      method: 'POST',\n      body: { pettingIntervalHours: hours },\n    })\n    pettingIntervalHours.value = hours\n  } catch (err) {\n    console.error('Failed to set frequency:', err)\n    alert('Failed to update petting frequency')\n  } finally {\n    frequencySaving.value = false\n  }\n}\n\nconst runTestMode = async (durationSec: number) => {\n  if (!isAuthenticated.value || frequencySaving.value || testModeCountdown.value != null) return\n  frequencySaving.value = true\n  const intervalHours = durationSec / 3600\n  try {\n    await $fetch('/api/bot/frequency', {\n      method: 'POST',\n      body: { pettingIntervalHours: intervalHours },\n    })\n    pettingIntervalHours.value = intervalHours\n    testModeCountdown.value = durationSec\n    if (testModeIntervalId) clearInterval(testModeIntervalId)\n    testModeIntervalId = setInterval(() => {\n      if (testModeCountdown.value == null) return\n      testModeCountdown.value -= 1\n      if (testModeCountdown.value <= 0) {\n        if (testModeIntervalId) clearInterval(testModeIntervalId)\n        testModeIntervalId = null\n        testModeCountdown.value = null\n        setFrequency(12)\n      }\n    }, 1000)\n  } catch (err) {\n    console.error('Failed to start test mode:', err)\n    alert('Failed to start test mode')\n  } finally {\n    frequencySaving.value = false\n  }\n}\n\n\nconst fetchPetterBalance = async () => {\n  balanceRefreshing.value = true\n  try {\n    const res = await $fetch<{ balance: string; balanceAddress: string | null }>('/api/petter-balance')\n    petterBalance.value = res.balance\n    petterBalanceAddress.value = res.balanceAddress\n  } catch (err) {\n    petterBalance.value = '—'\n    petterBalanceAddress.value = null\n  } finally {\n    balanceRefreshing.value = false\n  }\n}\n\nconst fetchDelegationOwners = async () => {\n  try {\n    const res = await $fetch<{ owners: { address: string; gotchiCount: number }[]; totalGotchis: number }>(\n      '/api/delegation/owners'\n    )\n    totalGotchisDelegated.value = res.totalGotchis ?? 0\n  } catch {\n    totalGotchisDelegated.value = null\n  }\n}\n\nconst checkAuth = async () => {\n  try {\n    const res = await $fetch<{ authenticated: boolean }>('/api/auth/check')\n    isAuthenticated.value = res.authenticated\n  } catch {\n    isAuthenticated.value = false\n  }\n}\n\nconst logout = async () => {\n  try {\n    await $fetch('/api/auth/logout', { method: 'POST' })\n    await disconnect(wagmiConfig)\n    await navigateTo('/')\n  } catch (err) {\n    console.error('Failed to logout:', err)\n  }\n}\n\nconst formatDate = (val: string | number | undefined) => {\n  if (!val) return '—'\n  const ts = typeof val === 'string' ? new Date(val).getTime() : val\n  return new Date(ts).toLocaleString()\n}\n\nconst formatLogTime = (ts: number) => {\n  const d = new Date(ts)\n  return d.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' })\n}\n\nconst formatGasCost = (eth: number | undefined) => {\n  if (eth == null || eth === 0) return '—'\n  if (eth < 0.0001) return '<0.0001 ETH'\n  return `${eth.toFixed(4)} ETH`\n}\n\nonUnmounted(() => {\n  if (testModeIntervalId) clearInterval(testModeIntervalId)\n})\n\nonMounted(async () => {\n  await checkAuth()\n  await fetchHealth()\n  if (isAuthenticated.value) {\n    const tasks = [\n      fetchHistory(),\n      fetchDelegation(),\n      fetchPetterBalance(),\n      fetchDelegationOwners(),\n    ]\n    if (workerEnabled.value) {\n      tasks.push(fetchWorkerLogs(), fetchFrequency())\n    }\n    await Promise.all(tasks)\n  }\n  loading.value = false\n  setInterval(fetchHealth, 30000)\n  if (isAuthenticated.value) {\n    setInterval(\n      () => {\n        const tasks = [fetchHistory(), fetchPetterBalance(), fetchDelegationOwners()]\n        if (workerEnabled.value) {\n          tasks.push(fetchWorkerLogs(), fetchFrequency())\n        }\n        return Promise.all(tasks)\n      },\n      60000\n    )\n  }\n})\n</script>\n"],"version":3}